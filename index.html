<html>
  <head>
    <link rel="stylesheet" type="text/css" href="brant.css"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script src="https://raw.github.com/BrantOlsen/game-of-life/master/game-of-life.js"></script>
  </head>
  <body>
    <div class="background">
      <canvas id="theCanvas"></canvas>
    </div>
    <div class="business_card">
      <div class="top">
        <div class="header">Brant Olsen</div>
        <div class="title">Software Developer</div>
        <div class="email title">brantolsen@gmail.com</div>
      </div>
          
      <table width=100%>
        <tr>
          <td style="text-align:left;"><div id="profiles" title="Show My Profiles">Profiles</div></td>
          <td style="text-align:right;"><div id="projects" title="Show My Projects">Projects</div></td>
        </tr>
        <tr>
          <td colspan=2 width=100% style="text-align: center;">
            <div id="profile_content">
             <a href="http://www.linkedin.com/in/brantolsen" title="Click for my Work and School history.">LinkedIn</a><br>
             <a href="https://plus.google.com/104241810880602297864" title="Click to find Google+ connections with me.">Google+</a><br>
             <a href="http://www.facebook.com/BrantOlsen" title="Click to find Facebook connections with me.">Facebook</a><br>
             <a href="http://steamcommunity.com/profiles/76561197991893791" title="Click to see my favorite games.">Steam</a><br>
            </div>
            <div id="projects_content">
              <a href="http://brantolsen.github.com/game-of-life/" title="Javascript implementation of Conway's Game of Life.">Game Of Life</a><br>
              <a href="http://brantolsen.github.com/random-growth/" title="Create images from random recursion.">Random Growth</a><br>
            </div>
          </td>
        </tr>
      </table>
      <div class="footer">            
        <a href="http://stackoverflow.com/users/1299073/brant-olsen">
          <img src="http://stackoverflow.com/users/flair/1299073.png?theme=dark" width="208" height="58" title="Profile for Brant Olsen at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for Brant Olsen at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
        </a>
      </div>
    </div>
    
    <script>
      // Add a new getInt function that ensures we always get the value
      // as an integer or 0 if the value is not set.
      Storage.prototype.getInt = function(key)
      {
        var myInt = localStorage.getItem(key);
        if (myInt == null)
        {
          return 0;  
        }
        return parseInt(myInt);
      }
      
      // Keep track of the number of visits for this user.
      localStorage.setItem("visits", localStorage.getInt("visits")+1);
      
      // Global scope it so I can always find it.
      var gol = null;
      
      $("#profiles").click(function(){
        $("#profile_content").slideDown();
        $("#projects_content").slideUp();
      });
      
      $("#projects").click(function(){
        $("#profile_content").slideUp();
        $("#projects_content").slideDown();
      });
      
      // Allow the user to click on the canvas to add cells.
      $("#theCanvas").click(function(event) {
        if (gol != null)
        {
          gol.fillByClick(event);
        }
      });
      
      // Toggle the update of the cells on space bar click.
      $(document).keyup(function(event) {
        // space bar
        if (gol != null && event.keyCode == 32)
        {
          gol.toggle();
        }
      });
      
      // Need to initialize the Game of Life on load.
      $(document).ready(function() {
        $(window).resize();
      });

      // Resize events may make the game ugly so adjust each time someone
      // changes the window's size.
      $(window).resize(function() {
        var canvas = document.getElementById("theCanvas");
        // Re-size the canvas to fit the whole screen. Do not use the JQuery selector here
        // since we are changing the canvas's width and height not its css width and height.
        canvas.width = $(".background").width();
        canvas.height = $(".background").height();
        var context = canvas.getContext("2d");

        // Do different animations in the background based on the number of vists.
        if (localStorage.getInt("visits") % 2 == 0)
        {
          if (gol == null)
          {
            gol = new GameOfLife(context, {cellSize: 5, 
                                          updateInterval: 50,
                                          color: "white"});
            gol.start();
          }

          var rowStart = Math.floor(gol.board.rows * .45);
          var colStart = Math.floor(gol.board.columns * .4);
          gol.resize();
          gol.createGliderGun(rowStart, colStart);
          gol.fillCells();
        }
      });
    </script>
  </body>
</html>